{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ConsensusAlgorithm = exports.ConsensusType = exports.Hardfork = exports.Chain = exports.CustomChain = void 0;\n\nvar events_1 = require(\"events\");\n\nvar crc_32_1 = require(\"crc-32\");\n\nvar ethereumjs_util_1 = require(\"ethereumjs-util\");\n\nvar chains_1 = require(\"./chains\");\n\nvar hardforks_1 = require(\"./hardforks\");\n\nvar eips_1 = require(\"./eips\");\n\nvar CustomChain;\n\n(function (CustomChain) {\n  /**\n   * Polygon (Matic) Mainnet\n   *\n   * - [Documentation](https://docs.matic.network/docs/develop/network-details/network)\n   */\n  CustomChain[\"PolygonMainnet\"] = \"polygon-mainnet\";\n  /**\n   * Polygon (Matic) Mumbai Testnet\n   *\n   * - [Documentation](https://docs.matic.network/docs/develop/network-details/network)\n   */\n\n  CustomChain[\"PolygonMumbai\"] = \"polygon-mumbai\";\n  /**\n   * Arbitrum Rinkeby Testnet\n   *\n   * - [Documentation](https://developer.offchainlabs.com/docs/public_testnet)\n   */\n\n  CustomChain[\"ArbitrumRinkebyTestnet\"] = \"arbitrum-rinkeby-testnet\";\n  /**\n   * xDai EVM sidechain with a native stable token\n   *\n   * - [Documentation](https://www.xdaichain.com/)\n   */\n\n  CustomChain[\"xDaiChain\"] = \"x-dai-chain\";\n})(CustomChain = exports.CustomChain || (exports.CustomChain = {}));\n\nvar Chain;\n\n(function (Chain) {\n  Chain[Chain[\"Mainnet\"] = 1] = \"Mainnet\";\n  Chain[Chain[\"Ropsten\"] = 3] = \"Ropsten\";\n  Chain[Chain[\"Rinkeby\"] = 4] = \"Rinkeby\";\n  Chain[Chain[\"Kovan\"] = 42] = \"Kovan\";\n  Chain[Chain[\"Goerli\"] = 5] = \"Goerli\";\n})(Chain = exports.Chain || (exports.Chain = {}));\n\nvar Hardfork;\n\n(function (Hardfork) {\n  Hardfork[\"Chainstart\"] = \"chainstart\";\n  Hardfork[\"Homestead\"] = \"homestead\";\n  Hardfork[\"Dao\"] = \"dao\";\n  Hardfork[\"TangerineWhistle\"] = \"tangerineWhistle\";\n  Hardfork[\"SpuriousDragon\"] = \"spuriousDragon\";\n  Hardfork[\"Byzantium\"] = \"byzantium\";\n  Hardfork[\"Constantinople\"] = \"constantinople\";\n  Hardfork[\"Petersburg\"] = \"petersburg\";\n  Hardfork[\"Istanbul\"] = \"istanbul\";\n  Hardfork[\"MuirGlacier\"] = \"muirGlacier\";\n  Hardfork[\"Berlin\"] = \"berlin\";\n  Hardfork[\"London\"] = \"london\";\n  Hardfork[\"Shanghai\"] = \"shanghai\";\n  Hardfork[\"Merge\"] = \"merge\";\n})(Hardfork = exports.Hardfork || (exports.Hardfork = {}));\n\nvar ConsensusType;\n\n(function (ConsensusType) {\n  ConsensusType[\"ProofOfStake\"] = \"pos\";\n  ConsensusType[\"ProofOfWork\"] = \"pow\";\n  ConsensusType[\"ProofOfAuthority\"] = \"poa\";\n})(ConsensusType = exports.ConsensusType || (exports.ConsensusType = {}));\n\nvar ConsensusAlgorithm;\n\n(function (ConsensusAlgorithm) {\n  ConsensusAlgorithm[\"Ethash\"] = \"ethash\";\n  ConsensusAlgorithm[\"Clique\"] = \"clique\";\n  ConsensusAlgorithm[\"Casper\"] = \"casper\";\n})(ConsensusAlgorithm = exports.ConsensusAlgorithm || (exports.ConsensusAlgorithm = {}));\n/**\n * Common class to access chain and hardfork parameters and to provide\n * a unified and shared view on the network and hardfork state.\n *\n * Use the {@link Common.custom} static constructor for creating simple\n * custom chain {@link Common} objects (more complete custom chain setups\n * can be created via the main constructor and the {@link CommonOpts.customChains} parameter).\n */\n\n\nvar Common =\n/** @class */\nfunction (_super) {\n  __extends(Common, _super);\n  /**\n   *\n   * @constructor\n   */\n\n\n  function Common(opts) {\n    var e_1, _a;\n\n    var _b, _c;\n\n    var _this = _super.call(this) || this;\n\n    _this._supportedHardforks = [];\n    _this._eips = [];\n    _this._customChains = (_b = opts.customChains) !== null && _b !== void 0 ? _b : [];\n    _this._chainParams = _this.setChain(opts.chain);\n    _this.DEFAULT_HARDFORK = (_c = _this._chainParams.defaultHardfork) !== null && _c !== void 0 ? _c : Hardfork.Istanbul;\n\n    try {\n      for (var _d = __values(_this._chainParams.hardforks), _e = _d.next(); !_e.done; _e = _d.next()) {\n        var hf = _e.value;\n\n        if (!hf.forkHash) {\n          hf.forkHash = _this._calcForkHash(hf.name);\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    _this._hardfork = _this.DEFAULT_HARDFORK;\n\n    if (opts.supportedHardforks) {\n      _this._supportedHardforks = opts.supportedHardforks;\n    }\n\n    if (opts.hardfork) {\n      _this.setHardfork(opts.hardfork);\n    }\n\n    if (opts.eips) {\n      _this.setEIPs(opts.eips);\n    }\n\n    return _this;\n  }\n  /**\n   * Creates a {@link Common} object for a custom chain, based on a standard one.\n   *\n   * It uses all the {@link Chain} parameters from the {@link baseChain} option except the ones overridden\n   * in a provided {@link chainParamsOrName} dictionary. Some usage example:\n   *\n   * ```javascript\n   * Common.custom({chainId: 123})\n   * ```\n   *\n   * There are also selected supported custom chains which can be initialized by using one of the\n   * {@link CustomChains} for {@link chainParamsOrName}, e.g.:\n   *\n   * ```javascript\n   * Common.custom(CustomChains.MaticMumbai)\n   * ```\n   *\n   * Note that these supported custom chains only provide some base parameters (usually the chain and\n   * network ID and a name) and can only be used for selected use cases (e.g. sending a tx with\n   * the `@ethereumjs/tx` library to a Layer-2 chain).\n   *\n   * @param chainParamsOrName Custom parameter dict (`name` will default to `custom-chain`) or string with name of a supported custom chain\n   * @param opts Custom chain options to set the {@link CustomCommonOpts.baseChain}, selected {@link CustomCommonOpts.hardfork} and others\n   */\n\n\n  Common.custom = function (chainParamsOrName, opts) {\n    var _a;\n\n    if (opts === void 0) {\n      opts = {};\n    }\n\n    var baseChain = (_a = opts.baseChain) !== null && _a !== void 0 ? _a : 'mainnet';\n\n    var standardChainParams = __assign({}, Common._getChainParams(baseChain));\n\n    standardChainParams['name'] = 'custom-chain';\n\n    if (typeof chainParamsOrName !== 'string') {\n      return new Common(__assign({\n        chain: __assign(__assign({}, standardChainParams), chainParamsOrName)\n      }, opts));\n    } else {\n      if (chainParamsOrName === CustomChain.PolygonMainnet) {\n        return Common.custom({\n          name: CustomChain.PolygonMainnet,\n          chainId: 137,\n          networkId: 137\n        });\n      }\n\n      if (chainParamsOrName === CustomChain.PolygonMumbai) {\n        return Common.custom({\n          name: CustomChain.PolygonMumbai,\n          chainId: 80001,\n          networkId: 80001\n        });\n      }\n\n      if (chainParamsOrName === CustomChain.ArbitrumRinkebyTestnet) {\n        return Common.custom({\n          name: CustomChain.ArbitrumRinkebyTestnet,\n          chainId: 421611,\n          networkId: 421611\n        });\n      }\n\n      if (chainParamsOrName === CustomChain.xDaiChain) {\n        return Common.custom({\n          name: CustomChain.xDaiChain,\n          chainId: 100,\n          networkId: 100\n        });\n      }\n\n      throw new Error(\"Custom chain \" + chainParamsOrName + \" not supported\");\n    }\n  };\n  /**\n   * Creates a {@link Common} object for a custom chain, based on a standard one. It uses all the `Chain`\n   * params from {@link baseChain} except the ones overridden in {@link customChainParams}.\n   *\n   * @deprecated Use {@link Common.custom} instead\n   *\n   * @param baseChain The name (`mainnet`) or id (`1`) of a standard chain used to base the custom\n   * chain params on.\n   * @param customChainParams The custom parameters of the chain.\n   * @param hardfork String identifier ('byzantium') for hardfork (optional)\n   * @param supportedHardforks Limit parameter returns to the given hardforks (optional)\n   */\n\n\n  Common.forCustomChain = function (baseChain, customChainParams, hardfork, supportedHardforks) {\n    var standardChainParams = Common._getChainParams(baseChain);\n\n    return new Common({\n      chain: __assign(__assign({}, standardChainParams), customChainParams),\n      hardfork: hardfork,\n      supportedHardforks: supportedHardforks\n    });\n  };\n  /**\n   * Static method to determine if a {@link chainId} is supported as a standard chain\n   * @param chainId BN id (`1`) of a standard chain\n   * @returns boolean\n   */\n\n\n  Common.isSupportedChainId = function (chainId) {\n    var initializedChains = (0, chains_1._getInitializedChains)();\n    return Boolean(initializedChains['names'][chainId.toString()]);\n  };\n\n  Common._getChainParams = function (chain, customChains) {\n    var initializedChains = (0, chains_1._getInitializedChains)(customChains);\n\n    if (typeof chain === 'number' || ethereumjs_util_1.BN.isBN(chain)) {\n      chain = chain.toString();\n\n      if (initializedChains['names'][chain]) {\n        var name_1 = initializedChains['names'][chain];\n        return initializedChains[name_1];\n      }\n\n      throw new Error(\"Chain with ID \" + chain + \" not supported\");\n    }\n\n    if (initializedChains[chain]) {\n      return initializedChains[chain];\n    }\n\n    throw new Error(\"Chain with name \" + chain + \" not supported\");\n  };\n  /**\n   * Sets the chain\n   * @param chain String ('mainnet') or Number (1) chain\n   *     representation. Or, a Dictionary of chain parameters for a private network.\n   * @returns The dictionary with parameters set as chain\n   */\n\n\n  Common.prototype.setChain = function (chain) {\n    var e_2, _a;\n\n    if (typeof chain === 'number' || typeof chain === 'string' || ethereumjs_util_1.BN.isBN(chain)) {\n      // Filter out genesis states if passed in to customChains\n      var plainCustomChains = void 0;\n\n      if (this._customChains && this._customChains.length > 0 && Array.isArray(this._customChains[0])) {\n        plainCustomChains = this._customChains.map(function (e) {\n          return e[0];\n        });\n      } else {\n        plainCustomChains = this._customChains;\n      }\n\n      this._chainParams = Common._getChainParams(chain, plainCustomChains);\n    } else if (typeof chain === 'object') {\n      if (this._customChains.length > 0) {\n        throw new Error('Chain must be a string, number, or BN when initialized with customChains passed in');\n      }\n\n      var required = ['networkId', 'genesis', 'hardforks', 'bootstrapNodes'];\n\n      try {\n        for (var required_1 = __values(required), required_1_1 = required_1.next(); !required_1_1.done; required_1_1 = required_1.next()) {\n          var param = required_1_1.value;\n\n          if (chain[param] === undefined) {\n            throw new Error(\"Missing required chain parameter: \" + param);\n          }\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (required_1_1 && !required_1_1.done && (_a = required_1.return)) _a.call(required_1);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n\n      this._chainParams = chain;\n    } else {\n      throw new Error('Wrong input format');\n    }\n\n    return this._chainParams;\n  };\n  /**\n   * Sets the hardfork to get params for\n   * @param hardfork String identifier (e.g. 'byzantium') or {@link Hardfork} enum\n   */\n\n\n  Common.prototype.setHardfork = function (hardfork) {\n    var e_3, _a;\n\n    if (!this._isSupportedHardfork(hardfork)) {\n      throw new Error(\"Hardfork \" + hardfork + \" not set as supported in supportedHardforks\");\n    }\n\n    var existing = false;\n\n    try {\n      for (var HARDFORK_CHANGES_1 = __values(hardforks_1.hardforks), HARDFORK_CHANGES_1_1 = HARDFORK_CHANGES_1.next(); !HARDFORK_CHANGES_1_1.done; HARDFORK_CHANGES_1_1 = HARDFORK_CHANGES_1.next()) {\n        var hfChanges = HARDFORK_CHANGES_1_1.value;\n\n        if (hfChanges[0] === hardfork) {\n          if (this._hardfork !== hardfork) {\n            this._hardfork = hardfork;\n            this.emit('hardforkChanged', hardfork);\n          }\n\n          existing = true;\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (HARDFORK_CHANGES_1_1 && !HARDFORK_CHANGES_1_1.done && (_a = HARDFORK_CHANGES_1.return)) _a.call(HARDFORK_CHANGES_1);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    if (!existing) {\n      throw new Error(\"Hardfork with name \" + hardfork + \" not supported\");\n    }\n  };\n  /**\n   * Returns the hardfork based on the block number or an optional\n   * total difficulty (Merge HF) provided.\n   *\n   * An optional TD takes precedence in case the corresponding HF block\n   * is set to `null` or otherwise needs to match (if not an error\n   * will be thrown).\n   *\n   * @param blockNumber\n   * @param td\n   * @returns The name of the HF\n   */\n\n\n  Common.prototype.getHardforkByBlockNumber = function (blockNumber, td) {\n    var e_4, _a;\n\n    blockNumber = (0, ethereumjs_util_1.toType)(blockNumber, ethereumjs_util_1.TypeOutput.BN);\n    td = td ? (0, ethereumjs_util_1.toType)(td, ethereumjs_util_1.TypeOutput.BN) : undefined;\n    var hardfork = Hardfork.Chainstart;\n    var minTdHF;\n    var maxTdHF;\n    var previousHF;\n\n    try {\n      for (var _b = __values(this.hardforks()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var hf = _c.value; // Skip comparison for not applied HFs\n\n        if (hf.block === null) {\n          if (td && hf.td) {\n            if (td.gten(hf.td)) {\n              return hf.name;\n            }\n          }\n\n          continue;\n        }\n\n        if (blockNumber.gte(new ethereumjs_util_1.BN(hf.block))) {\n          hardfork = hf.name;\n        }\n\n        if (td && hf.td) {\n          if (td.gten(hf.td)) {\n            minTdHF = hf.name;\n          } else {\n            maxTdHF = previousHF;\n          }\n        }\n\n        previousHF = hf.name;\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    if (td) {\n      var msgAdd = \"block number: \" + blockNumber + \" (-> \" + hardfork + \"), \";\n\n      if (minTdHF) {\n        if (!this.hardforkGteHardfork(hardfork, minTdHF)) {\n          var msg = 'HF determined by block number is lower than the minimum total difficulty HF';\n          msgAdd += \"total difficulty: \" + td + \" (-> \" + minTdHF + \")\";\n          throw new Error(msg + \": \" + msgAdd);\n        }\n      }\n\n      if (maxTdHF) {\n        if (!this.hardforkGteHardfork(maxTdHF, hardfork)) {\n          var msg = 'Maximum HF determined by total difficulty is lower than the block number HF';\n          msgAdd += \"total difficulty: \" + td + \" (-> \" + maxTdHF + \")\";\n          throw new Error(msg + \": \" + msgAdd);\n        }\n      }\n    }\n\n    return hardfork;\n  };\n  /**\n   * Sets a new hardfork based on the block number or an optional\n   * total difficulty (Merge HF) provided.\n   *\n   * An optional TD takes precedence in case the corresponding HF block\n   * is set to `null` or otherwise needs to match (if not an error\n   * will be thrown).\n   *\n   * @param blockNumber\n   * @param td\n   * @returns The name of the HF set\n   */\n\n\n  Common.prototype.setHardforkByBlockNumber = function (blockNumber, td) {\n    var hardfork = this.getHardforkByBlockNumber(blockNumber, td);\n    this.setHardfork(hardfork);\n    return hardfork;\n  };\n  /**\n   * Internal helper function to choose between hardfork set and hardfork provided as param\n   * @param hardfork Hardfork given to function as a parameter\n   * @returns Hardfork chosen to be used\n   */\n\n\n  Common.prototype._chooseHardfork = function (hardfork, onlySupported) {\n    if (onlySupported === void 0) {\n      onlySupported = true;\n    }\n\n    if (!hardfork) {\n      hardfork = this._hardfork;\n    } else if (onlySupported && !this._isSupportedHardfork(hardfork)) {\n      throw new Error(\"Hardfork \" + hardfork + \" not set as supported in supportedHardforks\");\n    }\n\n    return hardfork;\n  };\n  /**\n   * Internal helper function, returns the params for the given hardfork for the chain set\n   * @param hardfork Hardfork name\n   * @returns Dictionary with hardfork params\n   */\n\n\n  Common.prototype._getHardfork = function (hardfork) {\n    var e_5, _a;\n\n    var hfs = this.hardforks();\n\n    try {\n      for (var hfs_1 = __values(hfs), hfs_1_1 = hfs_1.next(); !hfs_1_1.done; hfs_1_1 = hfs_1.next()) {\n        var hf = hfs_1_1.value;\n        if (hf['name'] === hardfork) return hf;\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (hfs_1_1 && !hfs_1_1.done && (_a = hfs_1.return)) _a.call(hfs_1);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n\n    throw new Error(\"Hardfork \" + hardfork + \" not defined for chain \" + this.chainName());\n  };\n  /**\n   * Internal helper function to check if a hardfork is set to be supported by the library\n   * @param hardfork Hardfork name\n   * @returns True if hardfork is supported\n   */\n\n\n  Common.prototype._isSupportedHardfork = function (hardfork) {\n    var e_6, _a;\n\n    if (this._supportedHardforks.length > 0) {\n      try {\n        for (var _b = __values(this._supportedHardforks), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var supportedHf = _c.value;\n          if (hardfork === supportedHf) return true;\n        }\n      } catch (e_6_1) {\n        e_6 = {\n          error: e_6_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_6) throw e_6.error;\n        }\n      }\n    } else {\n      return true;\n    }\n\n    return false;\n  };\n  /**\n   * Sets the active EIPs\n   * @param eips\n   */\n\n\n  Common.prototype.setEIPs = function (eips) {\n    var e_7, _a;\n\n    var _this = this;\n\n    if (eips === void 0) {\n      eips = [];\n    }\n\n    var _loop_1 = function (eip) {\n      if (!(eip in eips_1.EIPs)) {\n        throw new Error(eip + \" not supported\");\n      }\n\n      var minHF = this_1.gteHardfork(eips_1.EIPs[eip]['minimumHardfork']);\n\n      if (!minHF) {\n        throw new Error(eip + \" cannot be activated on hardfork \" + this_1.hardfork() + \", minimumHardfork: \" + minHF);\n      }\n\n      if (eips_1.EIPs[eip].requiredEIPs) {\n        // eslint-disable-next-line prettier/prettier\n        eips_1.EIPs[eip].requiredEIPs.forEach(function (elem) {\n          if (!(eips.includes(elem) || _this.isActivatedEIP(elem))) {\n            throw new Error(eip + \" requires EIP \" + elem + \", but is not included in the EIP list\");\n          }\n        });\n      }\n    };\n\n    var this_1 = this;\n\n    try {\n      for (var eips_2 = __values(eips), eips_2_1 = eips_2.next(); !eips_2_1.done; eips_2_1 = eips_2.next()) {\n        var eip = eips_2_1.value;\n\n        _loop_1(eip);\n      }\n    } catch (e_7_1) {\n      e_7 = {\n        error: e_7_1\n      };\n    } finally {\n      try {\n        if (eips_2_1 && !eips_2_1.done && (_a = eips_2.return)) _a.call(eips_2);\n      } finally {\n        if (e_7) throw e_7.error;\n      }\n    }\n\n    this._eips = eips;\n  };\n  /**\n   * Returns a parameter for the current chain setup\n   *\n   * If the parameter is present in an EIP, the EIP always takes precendence.\n   * Otherwise the parameter if taken from the latest applied HF with\n   * a change on the respective parameter.\n   *\n   * @param topic Parameter topic ('gasConfig', 'gasPrices', 'vm', 'pow')\n   * @param name Parameter name (e.g. 'minGasLimit' for 'gasConfig' topic)\n   * @returns The value requested or `null` if not found\n   */\n\n\n  Common.prototype.param = function (topic, name) {\n    var e_8, _a; // TODO: consider the case that different active EIPs\n    // can change the same parameter\n\n\n    var value = null;\n\n    try {\n      for (var _b = __values(this._eips), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var eip = _c.value;\n        value = this.paramByEIP(topic, name, eip);\n\n        if (value !== null) {\n          return value;\n        }\n      }\n    } catch (e_8_1) {\n      e_8 = {\n        error: e_8_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_8) throw e_8.error;\n      }\n    }\n\n    return this.paramByHardfork(topic, name, this._hardfork);\n  };\n  /**\n   * Returns the parameter corresponding to a hardfork\n   * @param topic Parameter topic ('gasConfig', 'gasPrices', 'vm', 'pow')\n   * @param name Parameter name (e.g. 'minGasLimit' for 'gasConfig' topic)\n   * @param hardfork Hardfork name\n   * @returns The value requested or `null` if not found\n   */\n\n\n  Common.prototype.paramByHardfork = function (topic, name, hardfork) {\n    var e_9, _a, e_10, _b;\n\n    hardfork = this._chooseHardfork(hardfork);\n    var value = null;\n\n    try {\n      for (var HARDFORK_CHANGES_2 = __values(hardforks_1.hardforks), HARDFORK_CHANGES_2_1 = HARDFORK_CHANGES_2.next(); !HARDFORK_CHANGES_2_1.done; HARDFORK_CHANGES_2_1 = HARDFORK_CHANGES_2.next()) {\n        var hfChanges = HARDFORK_CHANGES_2_1.value; // EIP-referencing HF file (e.g. berlin.json)\n\n        if ('eips' in hfChanges[1]) {\n          var hfEIPs = hfChanges[1]['eips'];\n\n          try {\n            for (var hfEIPs_1 = (e_10 = void 0, __values(hfEIPs)), hfEIPs_1_1 = hfEIPs_1.next(); !hfEIPs_1_1.done; hfEIPs_1_1 = hfEIPs_1.next()) {\n              var eip = hfEIPs_1_1.value;\n              var valueEIP = this.paramByEIP(topic, name, eip);\n              value = valueEIP !== null ? valueEIP : value;\n            }\n          } catch (e_10_1) {\n            e_10 = {\n              error: e_10_1\n            };\n          } finally {\n            try {\n              if (hfEIPs_1_1 && !hfEIPs_1_1.done && (_b = hfEIPs_1.return)) _b.call(hfEIPs_1);\n            } finally {\n              if (e_10) throw e_10.error;\n            }\n          } // Paramater-inlining HF file (e.g. istanbul.json)\n\n        } else {\n          if (!hfChanges[1][topic]) {\n            throw new Error(\"Topic \" + topic + \" not defined\");\n          }\n\n          if (hfChanges[1][topic][name] !== undefined) {\n            value = hfChanges[1][topic][name].v;\n          }\n        }\n\n        if (hfChanges[0] === hardfork) break;\n      }\n    } catch (e_9_1) {\n      e_9 = {\n        error: e_9_1\n      };\n    } finally {\n      try {\n        if (HARDFORK_CHANGES_2_1 && !HARDFORK_CHANGES_2_1.done && (_a = HARDFORK_CHANGES_2.return)) _a.call(HARDFORK_CHANGES_2);\n      } finally {\n        if (e_9) throw e_9.error;\n      }\n    }\n\n    return value;\n  };\n  /**\n   * Returns a parameter corresponding to an EIP\n   * @param topic Parameter topic ('gasConfig', 'gasPrices', 'vm', 'pow')\n   * @param name Parameter name (e.g. 'minGasLimit' for 'gasConfig' topic)\n   * @param eip Number of the EIP\n   * @returns The value requested or `null` if not found\n   */\n\n\n  Common.prototype.paramByEIP = function (topic, name, eip) {\n    if (!(eip in eips_1.EIPs)) {\n      throw new Error(eip + \" not supported\");\n    }\n\n    var eipParams = eips_1.EIPs[eip];\n\n    if (!(topic in eipParams)) {\n      throw new Error(\"Topic \" + topic + \" not defined\");\n    }\n\n    if (eipParams[topic][name] === undefined) {\n      return null;\n    }\n\n    var value = eipParams[topic][name].v;\n    return value;\n  };\n  /**\n   * Returns a parameter for the hardfork active on block number\n   * @param topic Parameter topic\n   * @param name Parameter name\n   * @param blockNumber Block number\n   */\n\n\n  Common.prototype.paramByBlock = function (topic, name, blockNumber) {\n    var activeHfs = this.activeHardforks(blockNumber);\n    var hardfork = activeHfs[activeHfs.length - 1]['name'];\n    return this.paramByHardfork(topic, name, hardfork);\n  };\n  /**\n   * Checks if an EIP is activated by either being included in the EIPs\n   * manually passed in with the {@link CommonOpts.eips} or in a\n   * hardfork currently being active\n   *\n   * Note: this method only works for EIPs being supported\n   * by the {@link CommonOpts.eips} constructor option\n   * @param eip\n   */\n\n\n  Common.prototype.isActivatedEIP = function (eip) {\n    var e_11, _a;\n\n    if (this.eips().includes(eip)) {\n      return true;\n    }\n\n    try {\n      for (var HARDFORK_CHANGES_3 = __values(hardforks_1.hardforks), HARDFORK_CHANGES_3_1 = HARDFORK_CHANGES_3.next(); !HARDFORK_CHANGES_3_1.done; HARDFORK_CHANGES_3_1 = HARDFORK_CHANGES_3.next()) {\n        var hfChanges = HARDFORK_CHANGES_3_1.value;\n        var hf = hfChanges[1];\n\n        if (this.gteHardfork(hf['name']) && 'eips' in hf) {\n          if (hf['eips'].includes(eip)) {\n            return true;\n          }\n        }\n      }\n    } catch (e_11_1) {\n      e_11 = {\n        error: e_11_1\n      };\n    } finally {\n      try {\n        if (HARDFORK_CHANGES_3_1 && !HARDFORK_CHANGES_3_1.done && (_a = HARDFORK_CHANGES_3.return)) _a.call(HARDFORK_CHANGES_3);\n      } finally {\n        if (e_11) throw e_11.error;\n      }\n    }\n\n    return false;\n  };\n  /**\n   * Checks if set or provided hardfork is active on block number\n   * @param hardfork Hardfork name or null (for HF set)\n   * @param blockNumber\n   * @param opts Hardfork options (onlyActive unused)\n   * @returns True if HF is active on block number\n   */\n\n\n  Common.prototype.hardforkIsActiveOnBlock = function (hardfork, blockNumber, opts) {\n    var _a;\n\n    if (opts === void 0) {\n      opts = {};\n    }\n\n    blockNumber = (0, ethereumjs_util_1.toType)(blockNumber, ethereumjs_util_1.TypeOutput.BN);\n    var onlySupported = (_a = opts.onlySupported) !== null && _a !== void 0 ? _a : false;\n    hardfork = this._chooseHardfork(hardfork, onlySupported);\n    var hfBlock = this.hardforkBlockBN(hardfork);\n\n    if (hfBlock && blockNumber.gte(hfBlock)) {\n      return true;\n    }\n\n    return false;\n  };\n  /**\n   * Alias to hardforkIsActiveOnBlock when hardfork is set\n   * @param blockNumber\n   * @param opts Hardfork options (onlyActive unused)\n   * @returns True if HF is active on block number\n   */\n\n\n  Common.prototype.activeOnBlock = function (blockNumber, opts) {\n    return this.hardforkIsActiveOnBlock(null, blockNumber, opts);\n  };\n  /**\n   * Sequence based check if given or set HF1 is greater than or equal HF2\n   * @param hardfork1 Hardfork name or null (if set)\n   * @param hardfork2 Hardfork name\n   * @param opts Hardfork options\n   * @returns True if HF1 gte HF2\n   */\n\n\n  Common.prototype.hardforkGteHardfork = function (hardfork1, hardfork2, opts) {\n    var e_12, _a;\n\n    if (opts === void 0) {\n      opts = {};\n    }\n\n    var onlyActive = opts.onlyActive === undefined ? false : opts.onlyActive;\n    hardfork1 = this._chooseHardfork(hardfork1, opts.onlySupported);\n    var hardforks;\n\n    if (onlyActive) {\n      hardforks = this.activeHardforks(null, opts);\n    } else {\n      hardforks = this.hardforks();\n    }\n\n    var posHf1 = -1,\n        posHf2 = -1;\n    var index = 0;\n\n    try {\n      for (var hardforks_2 = __values(hardforks), hardforks_2_1 = hardforks_2.next(); !hardforks_2_1.done; hardforks_2_1 = hardforks_2.next()) {\n        var hf = hardforks_2_1.value;\n        if (hf['name'] === hardfork1) posHf1 = index;\n        if (hf['name'] === hardfork2) posHf2 = index;\n        index += 1;\n      }\n    } catch (e_12_1) {\n      e_12 = {\n        error: e_12_1\n      };\n    } finally {\n      try {\n        if (hardforks_2_1 && !hardforks_2_1.done && (_a = hardforks_2.return)) _a.call(hardforks_2);\n      } finally {\n        if (e_12) throw e_12.error;\n      }\n    }\n\n    return posHf1 >= posHf2 && posHf2 !== -1;\n  };\n  /**\n   * Alias to hardforkGteHardfork when hardfork is set\n   * @param hardfork Hardfork name\n   * @param opts Hardfork options\n   * @returns True if hardfork set is greater than hardfork provided\n   */\n\n\n  Common.prototype.gteHardfork = function (hardfork, opts) {\n    return this.hardforkGteHardfork(null, hardfork, opts);\n  };\n  /**\n   * Checks if given or set hardfork is active on the chain\n   * @param hardfork Hardfork name, optional if HF set\n   * @param opts Hardfork options (onlyActive unused)\n   * @returns True if hardfork is active on the chain\n   */\n\n\n  Common.prototype.hardforkIsActiveOnChain = function (hardfork, opts) {\n    var e_13, _a;\n\n    var _b;\n\n    if (opts === void 0) {\n      opts = {};\n    }\n\n    var onlySupported = (_b = opts.onlySupported) !== null && _b !== void 0 ? _b : false;\n    hardfork = this._chooseHardfork(hardfork, onlySupported);\n\n    try {\n      for (var _c = __values(this.hardforks()), _d = _c.next(); !_d.done; _d = _c.next()) {\n        var hf = _d.value;\n        if (hf['name'] === hardfork && hf['block'] !== null) return true;\n      }\n    } catch (e_13_1) {\n      e_13 = {\n        error: e_13_1\n      };\n    } finally {\n      try {\n        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n      } finally {\n        if (e_13) throw e_13.error;\n      }\n    }\n\n    return false;\n  };\n  /**\n   * Returns the active hardfork switches for the current chain\n   * @param blockNumber up to block if provided, otherwise for the whole chain\n   * @param opts Hardfork options (onlyActive unused)\n   * @return Array with hardfork arrays\n   */\n\n\n  Common.prototype.activeHardforks = function (blockNumber, opts) {\n    var e_14, _a;\n\n    if (opts === void 0) {\n      opts = {};\n    }\n\n    var activeHardforks = [];\n    var hfs = this.hardforks();\n\n    try {\n      for (var hfs_2 = __values(hfs), hfs_2_1 = hfs_2.next(); !hfs_2_1.done; hfs_2_1 = hfs_2.next()) {\n        var hf = hfs_2_1.value;\n        if (hf['block'] === null) continue;\n        if (blockNumber !== undefined && blockNumber !== null && blockNumber < hf['block']) break;\n        if (opts.onlySupported && !this._isSupportedHardfork(hf['name'])) continue;\n        activeHardforks.push(hf);\n      }\n    } catch (e_14_1) {\n      e_14 = {\n        error: e_14_1\n      };\n    } finally {\n      try {\n        if (hfs_2_1 && !hfs_2_1.done && (_a = hfs_2.return)) _a.call(hfs_2);\n      } finally {\n        if (e_14) throw e_14.error;\n      }\n    }\n\n    return activeHardforks;\n  };\n  /**\n   * Returns the latest active hardfork name for chain or block or throws if unavailable\n   * @param blockNumber up to block if provided, otherwise for the whole chain\n   * @param opts Hardfork options (onlyActive unused)\n   * @return Hardfork name\n   */\n\n\n  Common.prototype.activeHardfork = function (blockNumber, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n\n    var activeHardforks = this.activeHardforks(blockNumber, opts);\n\n    if (activeHardforks.length > 0) {\n      return activeHardforks[activeHardforks.length - 1]['name'];\n    } else {\n      throw new Error(\"No (supported) active hardfork found\");\n    }\n  };\n  /**\n   * Returns the hardfork change block for hardfork provided or set\n   * @param hardfork Hardfork name, optional if HF set\n   * @returns Block number or null if unscheduled\n   * @deprecated Please use {@link Common.hardforkBlockBN} for large number support\n   */\n\n\n  Common.prototype.hardforkBlock = function (hardfork) {\n    var block = this.hardforkBlockBN(hardfork);\n    return block ? (0, ethereumjs_util_1.toType)(block, ethereumjs_util_1.TypeOutput.Number) : null;\n  };\n  /**\n   * Returns the hardfork change block for hardfork provided or set\n   * @param hardfork Hardfork name, optional if HF set\n   * @returns Block number or null if unscheduled\n   */\n\n\n  Common.prototype.hardforkBlockBN = function (hardfork) {\n    hardfork = this._chooseHardfork(hardfork, false);\n\n    var block = this._getHardfork(hardfork)['block'];\n\n    if (block === undefined || block === null) {\n      return null;\n    }\n\n    return new ethereumjs_util_1.BN(block);\n  };\n  /**\n   * Returns the hardfork change total difficulty (Merge HF) for hardfork provided or set\n   * @param hardfork Hardfork name, optional if HF set\n   * @returns Total difficulty or null if no set\n   */\n\n\n  Common.prototype.hardforkTD = function (hardfork) {\n    hardfork = this._chooseHardfork(hardfork, false);\n\n    var td = this._getHardfork(hardfork)['td'];\n\n    if (td === undefined || td === null) {\n      return null;\n    }\n\n    return new ethereumjs_util_1.BN(td);\n  };\n  /**\n   * True if block number provided is the hardfork (given or set) change block\n   * @param blockNumber Number of the block to check\n   * @param hardfork Hardfork name, optional if HF set\n   * @returns True if blockNumber is HF block\n   */\n\n\n  Common.prototype.isHardforkBlock = function (blockNumber, hardfork) {\n    blockNumber = (0, ethereumjs_util_1.toType)(blockNumber, ethereumjs_util_1.TypeOutput.BN);\n    hardfork = this._chooseHardfork(hardfork, false);\n    var block = this.hardforkBlockBN(hardfork);\n    return block ? block.eq(blockNumber) : false;\n  };\n  /**\n   * Returns the change block for the next hardfork after the hardfork provided or set\n   * @param hardfork Hardfork name, optional if HF set\n   * @returns Block number or null if not available\n   * @deprecated Please use {@link Common.nextHardforkBlockBN} for large number support\n   */\n\n\n  Common.prototype.nextHardforkBlock = function (hardfork) {\n    var block = this.nextHardforkBlockBN(hardfork);\n    return block === null ? null : (0, ethereumjs_util_1.toType)(block, ethereumjs_util_1.TypeOutput.Number);\n  };\n  /**\n   * Returns the change block for the next hardfork after the hardfork provided or set\n   * @param hardfork Hardfork name, optional if HF set\n   * @returns Block number or null if not available\n   */\n\n\n  Common.prototype.nextHardforkBlockBN = function (hardfork) {\n    hardfork = this._chooseHardfork(hardfork, false);\n    var hfBlock = this.hardforkBlockBN(hardfork);\n\n    if (hfBlock === null) {\n      return null;\n    } // Next fork block number or null if none available\n    // Logic: if accumulator is still null and on the first occurrence of\n    // a block greater than the current hfBlock set the accumulator,\n    // pass on the accumulator as the final result from this time on\n\n\n    var nextHfBlock = this.hardforks().reduce(function (acc, hf) {\n      var block = new ethereumjs_util_1.BN(hf.block);\n      return block.gt(hfBlock) && acc === null ? block : acc;\n    }, null);\n    return nextHfBlock;\n  };\n  /**\n   * True if block number provided is the hardfork change block following the hardfork given or set\n   * @param blockNumber Number of the block to check\n   * @param hardfork Hardfork name, optional if HF set\n   * @returns True if blockNumber is HF block\n   */\n\n\n  Common.prototype.isNextHardforkBlock = function (blockNumber, hardfork) {\n    blockNumber = (0, ethereumjs_util_1.toType)(blockNumber, ethereumjs_util_1.TypeOutput.BN);\n    hardfork = this._chooseHardfork(hardfork, false);\n    var nextHardforkBlock = this.nextHardforkBlockBN(hardfork);\n    return nextHardforkBlock === null ? false : nextHardforkBlock.eq(blockNumber);\n  };\n  /**\n   * Internal helper function to calculate a fork hash\n   * @param hardfork Hardfork name\n   * @returns Fork hash as hex string\n   */\n\n\n  Common.prototype._calcForkHash = function (hardfork) {\n    var e_15, _a;\n\n    var genesis = Buffer.from(this.genesis().hash.substr(2), 'hex');\n    var hfBuffer = Buffer.alloc(0);\n    var prevBlock = 0;\n\n    try {\n      for (var _b = __values(this.hardforks()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var hf = _c.value;\n        var block = hf.block; // Skip for chainstart (0), not applied HFs (null) and\n        // when already applied on same block number HFs\n\n        if (block !== 0 && block !== null && block !== prevBlock) {\n          var hfBlockBuffer = Buffer.from(block.toString(16).padStart(16, '0'), 'hex');\n          hfBuffer = Buffer.concat([hfBuffer, hfBlockBuffer]);\n        }\n\n        if (hf.name === hardfork) break;\n\n        if (block !== null) {\n          prevBlock = block;\n        }\n      }\n    } catch (e_15_1) {\n      e_15 = {\n        error: e_15_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_15) throw e_15.error;\n      }\n    }\n\n    var inputBuffer = Buffer.concat([genesis, hfBuffer]); // CRC32 delivers result as signed (negative) 32-bit integer,\n    // convert to hex string\n\n    var forkhash = (0, ethereumjs_util_1.intToBuffer)((0, crc_32_1.buf)(inputBuffer) >>> 0).toString('hex');\n    return \"0x\" + forkhash;\n  };\n  /**\n   * Returns an eth/64 compliant fork hash (EIP-2124)\n   * @param hardfork Hardfork name, optional if HF set\n   */\n\n\n  Common.prototype.forkHash = function (hardfork) {\n    hardfork = this._chooseHardfork(hardfork, false);\n\n    var data = this._getHardfork(hardfork);\n\n    if (data['block'] === null) {\n      var msg = 'No fork hash calculation possible for non-applied or future hardfork';\n      throw new Error(msg);\n    }\n\n    if (data['forkHash'] !== undefined) {\n      return data['forkHash'];\n    }\n\n    return this._calcForkHash(hardfork);\n  };\n  /**\n   *\n   * @param forkHash Fork hash as a hex string\n   * @returns Array with hardfork data (name, block, forkHash)\n   */\n\n\n  Common.prototype.hardforkForForkHash = function (forkHash) {\n    var resArray = this.hardforks().filter(function (hf) {\n      return hf.forkHash === forkHash;\n    });\n    return resArray.length >= 1 ? resArray[resArray.length - 1] : null;\n  };\n  /**\n   * Returns the Genesis parameters of the current chain\n   * @returns Genesis dictionary\n   */\n\n\n  Common.prototype.genesis = function () {\n    return this._chainParams['genesis'];\n  };\n  /**\n   * Returns the Genesis state of the current chain,\n   * both account addresses and values are provided\n   * as hex-prefixed strings\n   *\n   * @returns {Array} Genesis state\n   */\n\n\n  Common.prototype.genesisState = function () {\n    var e_16, _a; // Use require statements here in favor of import statements\n    // to load json files on demand\n    // (high memory usage by large mainnet.json genesis state file)\n\n\n    switch (this.chainName()) {\n      case 'mainnet':\n        return require('./genesisStates/mainnet.json');\n\n      case 'ropsten':\n        return require('./genesisStates/ropsten.json');\n\n      case 'rinkeby':\n        return require('./genesisStates/rinkeby.json');\n\n      case 'kovan':\n        return require('./genesisStates/kovan.json');\n\n      case 'goerli':\n        return require('./genesisStates/goerli.json');\n    } // Custom chains with genesis state provided\n\n\n    if (this._customChains && this._customChains.length > 0 && Array.isArray(this._customChains[0])) {\n      try {\n        for (var _b = __values(this._customChains), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var chainArrayWithGenesis = _c.value;\n\n          if (chainArrayWithGenesis[0].name === this.chainName()) {\n            return chainArrayWithGenesis[1];\n          }\n        }\n      } catch (e_16_1) {\n        e_16 = {\n          error: e_16_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_16) throw e_16.error;\n        }\n      }\n    }\n\n    return {};\n  };\n  /**\n   * Returns the hardforks for current chain\n   * @returns {Array} Array with arrays of hardforks\n   */\n\n\n  Common.prototype.hardforks = function () {\n    return this._chainParams['hardforks'];\n  };\n  /**\n   * Returns bootstrap nodes for the current chain\n   * @returns {Dictionary} Dict with bootstrap nodes\n   */\n\n\n  Common.prototype.bootstrapNodes = function () {\n    return this._chainParams['bootstrapNodes'];\n  };\n  /**\n   * Returns DNS networks for the current chain\n   * @returns {String[]} Array of DNS ENR urls\n   */\n\n\n  Common.prototype.dnsNetworks = function () {\n    return this._chainParams['dnsNetworks'];\n  };\n  /**\n   * Returns the hardfork set\n   * @returns Hardfork name\n   */\n\n\n  Common.prototype.hardfork = function () {\n    return this._hardfork;\n  };\n  /**\n   * Returns the Id of current chain\n   * @returns chain Id\n   * @deprecated Please use {@link Common.chainIdBN} for large number support\n   */\n\n\n  Common.prototype.chainId = function () {\n    return (0, ethereumjs_util_1.toType)(this.chainIdBN(), ethereumjs_util_1.TypeOutput.Number);\n  };\n  /**\n   * Returns the Id of current chain\n   * @returns chain Id\n   */\n\n\n  Common.prototype.chainIdBN = function () {\n    return new ethereumjs_util_1.BN(this._chainParams['chainId']);\n  };\n  /**\n   * Returns the name of current chain\n   * @returns chain name (lower case)\n   */\n\n\n  Common.prototype.chainName = function () {\n    return this._chainParams['name'];\n  };\n  /**\n   * Returns the Id of current network\n   * @returns network Id\n   * @deprecated Please use {@link Common.networkIdBN} for large number support\n   */\n\n\n  Common.prototype.networkId = function () {\n    return (0, ethereumjs_util_1.toType)(this.networkIdBN(), ethereumjs_util_1.TypeOutput.Number);\n  };\n  /**\n   * Returns the Id of current network\n   * @returns network Id\n   */\n\n\n  Common.prototype.networkIdBN = function () {\n    return new ethereumjs_util_1.BN(this._chainParams['networkId']);\n  };\n  /**\n   * Returns the active EIPs\n   * @returns List of EIPs\n   */\n\n\n  Common.prototype.eips = function () {\n    return this._eips;\n  };\n  /**\n   * Returns the consensus type of the network\n   * Possible values: \"pow\"|\"poa\"|\"pos\"\n   *\n   * Note: This value can update along a hardfork.\n   */\n\n\n  Common.prototype.consensusType = function () {\n    var e_17, _a;\n\n    var hardfork = this.hardfork();\n    var value;\n\n    try {\n      for (var HARDFORK_CHANGES_4 = __values(hardforks_1.hardforks), HARDFORK_CHANGES_4_1 = HARDFORK_CHANGES_4.next(); !HARDFORK_CHANGES_4_1.done; HARDFORK_CHANGES_4_1 = HARDFORK_CHANGES_4.next()) {\n        var hfChanges = HARDFORK_CHANGES_4_1.value;\n\n        if ('consensus' in hfChanges[1]) {\n          value = hfChanges[1]['consensus']['type'];\n        }\n\n        if (hfChanges[0] === hardfork) break;\n      }\n    } catch (e_17_1) {\n      e_17 = {\n        error: e_17_1\n      };\n    } finally {\n      try {\n        if (HARDFORK_CHANGES_4_1 && !HARDFORK_CHANGES_4_1.done && (_a = HARDFORK_CHANGES_4.return)) _a.call(HARDFORK_CHANGES_4);\n      } finally {\n        if (e_17) throw e_17.error;\n      }\n    }\n\n    if (value) {\n      return value;\n    }\n\n    return this._chainParams['consensus']['type'];\n  };\n  /**\n   * Returns the concrete consensus implementation\n   * algorithm or protocol for the network\n   * e.g. \"ethash\" for \"pow\" consensus type,\n   * \"clique\" for \"poa\" consensus type or\n   * \"casper\" for \"pos\" consensus type.\n   *\n   * Note: This value can update along a hardfork.\n   */\n\n\n  Common.prototype.consensusAlgorithm = function () {\n    var e_18, _a;\n\n    var hardfork = this.hardfork();\n    var value;\n\n    try {\n      for (var HARDFORK_CHANGES_5 = __values(hardforks_1.hardforks), HARDFORK_CHANGES_5_1 = HARDFORK_CHANGES_5.next(); !HARDFORK_CHANGES_5_1.done; HARDFORK_CHANGES_5_1 = HARDFORK_CHANGES_5.next()) {\n        var hfChanges = HARDFORK_CHANGES_5_1.value;\n\n        if ('consensus' in hfChanges[1]) {\n          value = hfChanges[1]['consensus']['algorithm'];\n        }\n\n        if (hfChanges[0] === hardfork) break;\n      }\n    } catch (e_18_1) {\n      e_18 = {\n        error: e_18_1\n      };\n    } finally {\n      try {\n        if (HARDFORK_CHANGES_5_1 && !HARDFORK_CHANGES_5_1.done && (_a = HARDFORK_CHANGES_5.return)) _a.call(HARDFORK_CHANGES_5);\n      } finally {\n        if (e_18) throw e_18.error;\n      }\n    }\n\n    if (value) {\n      return value;\n    }\n\n    return this._chainParams['consensus']['algorithm'];\n  };\n  /**\n   * Returns a dictionary with consensus configuration\n   * parameters based on the consensus algorithm\n   *\n   * Expected returns (parameters must be present in\n   * the respective chain json files):\n   *\n   * ethash: -\n   * clique: period, epoch\n   * aura: -\n   * casper: -\n   *\n   * Note: This value can update along a hardfork.\n   */\n\n\n  Common.prototype.consensusConfig = function () {\n    var e_19, _a;\n\n    var hardfork = this.hardfork();\n    var value;\n\n    try {\n      for (var HARDFORK_CHANGES_6 = __values(hardforks_1.hardforks), HARDFORK_CHANGES_6_1 = HARDFORK_CHANGES_6.next(); !HARDFORK_CHANGES_6_1.done; HARDFORK_CHANGES_6_1 = HARDFORK_CHANGES_6.next()) {\n        var hfChanges = HARDFORK_CHANGES_6_1.value;\n\n        if ('consensus' in hfChanges[1]) {\n          // The config parameter is named after the respective consensus algorithm\n          value = hfChanges[1]['consensus'][hfChanges[1]['consensus']['algorithm']];\n        }\n\n        if (hfChanges[0] === hardfork) break;\n      }\n    } catch (e_19_1) {\n      e_19 = {\n        error: e_19_1\n      };\n    } finally {\n      try {\n        if (HARDFORK_CHANGES_6_1 && !HARDFORK_CHANGES_6_1.done && (_a = HARDFORK_CHANGES_6.return)) _a.call(HARDFORK_CHANGES_6);\n      } finally {\n        if (e_19) throw e_19.error;\n      }\n    }\n\n    if (value) {\n      return value;\n    }\n\n    var consensusAlgorithm = this.consensusAlgorithm();\n    return this._chainParams['consensus'][consensusAlgorithm];\n  };\n  /**\n   * Returns a deep copy of this {@link Common} instance.\n   */\n\n\n  Common.prototype.copy = function () {\n    return Object.assign(Object.create(Object.getPrototypeOf(this)), this);\n  };\n\n  return Common;\n}(events_1.EventEmitter);\n\nexports.default = Common;","map":{"version":3,"mappings":"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","names":["CustomChain","exports","Chain","Hardfork","ConsensusType","ConsensusAlgorithm","__extends","opts","_super","_this","_customChains","customChains","_b","_chainParams","setChain","chain","DEFAULT_HARDFORK","defaultHardfork","_c","Istanbul","hardforks","_e","hf","forkHash","_calcForkHash","name","_hardfork","supportedHardforks","_supportedHardforks","hardfork","setHardfork","eips","setEIPs","Common","chainParamsOrName","baseChain","_a","standardChainParams","_getChainParams","__assign","PolygonMainnet","custom","chainId","networkId","PolygonMumbai","ArbitrumRinkebyTestnet","xDaiChain","Error","customChainParams","initializedChains","Boolean","toString","ethereumjs_util_1","isBN","name_1","plainCustomChains","length","Array","isArray","map","e","required","required_1_1","param","undefined","_isSupportedHardfork","existing","HARDFORK_CHANGES_1_1","hfChanges","emit","blockNumber","td","BN","Chainstart","minTdHF","maxTdHF","previousHF","block","gten","gte","msgAdd","hardforkGteHardfork","msg","getHardforkByBlockNumber","onlySupported","hfs","hfs_1_1","chainName","supportedHf","eip","eips_1","minHF","this_1","gteHardfork","requiredEIPs","forEach","elem","includes","isActivatedEIP","eips_2_1","_eips","topic","value","paramByEIP","paramByHardfork","_chooseHardfork","HARDFORK_CHANGES_2_1","hfEIPs","hfEIPs_1_1","valueEIP","v","eipParams","activeHfs","activeHardforks","HARDFORK_CHANGES_3_1","hfBlock","hardforkBlockBN","hardforkIsActiveOnBlock","hardfork1","hardfork2","onlyActive","posHf1","posHf2","index","hardforks_2_1","_d","hfs_2_1","push","Number","_getHardfork","eq","nextHardforkBlockBN","nextHfBlock","reduce","acc","gt","nextHardforkBlock","genesis","Buffer","from","hash","substr","hfBuffer","alloc","prevBlock","hfBlockBuffer","padStart","concat","inputBuffer","forkhash","data","resArray","filter","require","chainArrayWithGenesis","chainIdBN","networkIdBN","HARDFORK_CHANGES_4_1","HARDFORK_CHANGES_5_1","HARDFORK_CHANGES_6_1","consensusAlgorithm","Object","assign","create","getPrototypeOf","events_1"],"sourceRoot":"","sources":["../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}