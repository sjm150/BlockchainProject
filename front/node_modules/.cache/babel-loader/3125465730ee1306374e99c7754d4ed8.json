{"ast":null,"code":"import NFTContractBuild from 'contracts/NFT.json';\nimport Web3 from 'web3';\nimport RequestContractBuild from 'contracts/RequestManager.json';\nlet selectedAccount;\nlet erc20Contract;\nlet requestContract;\nlet BurnContract;\nlet readContract;\nlet erc20ExampleContract;\nlet isInitialized = false;\nexport const init = async () => {\n  let provider = window.ethereum;\n\n  if (typeof provider !== 'undefined') {\n    provider.request({\n      method: 'eth_requestAccounts'\n    }).then(accounts => {\n      selectedAccount = accounts[0];\n      console.log(`Selected account is ${selectedAccount}`);\n    }).catch(err => {\n      console.log(err);\n      return;\n    });\n    window.ethereum.on('accountsChanged', function (accounts) {\n      selectedAccount = accounts[0];\n      console.log(`Selected account changed to ${selectedAccount}`);\n    });\n  }\n\n  const web3 = new Web3(provider);\n  const networkId = await web3.eth.net.getId();\n  const erc20Abi = [{\n    constant: true,\n    inputs: [{\n      name: '_owner',\n      type: 'address'\n    }],\n    name: 'balanceOf',\n    outputs: [{\n      name: 'balance',\n      type: 'uint256'\n    }],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  }];\n  const requestabi = [{\n    inputs: [{\n      \"internalType\": \"string\",\n      \"name\": \"_gameID\",\n      \"type\": \"string\"\n    }, {\n      \"internalType\": \"uint256\",\n      \"name\": \"_amount\",\n      \"type\": \"uint256\"\n    }],\n    name: \"requestMint\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\"\n  }];\n  const requestBurnabi = [{\n    inputs: [{\n      \"internalType\": \"string\",\n      \"name\": \"_gameID\",\n      \"type\": \"string\"\n    }, {\n      \"internalType\": \"uint256\",\n      \"name\": \"_amount\",\n      \"type\": \"uint256\"\n    }],\n    name: \"requestBurn\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\"\n  }];\n  const readabi = [{\n    inputs: [],\n    name: \"read\",\n    outputs: [{\n      \"internalType\": \"uint256\",\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }, {\n      \"internalType\": \"string[]\",\n      \"name\": \"\",\n      \"type\": \"string[]\"\n    }, {\n      \"internalType\": \"uint256[]\",\n      \"name\": \"\",\n      \"type\": \"uint256[]\"\n    }, {\n      \"internalType\": \"bool[]\",\n      \"name\": \"\",\n      \"type\": \"bool[]\"\n    }],\n    stateMutability: \"view\",\n    type: \"function\"\n  }];\n  const erc20ExAbi = [{\n    inputs: [],\n    name: \"name\",\n    \"outputs\": [{\n      \"internalType\": \"string\",\n      \"name\": \"\",\n      \"type\": \"string\"\n    }],\n    stateMutability: \"view\",\n    type: \"function\"\n  }, {\n    inputs: [],\n    name: \"symbol\",\n    outputs: [{\n      \"internalType\": \"string\",\n      \"name\": \"\",\n      \"type\": \"string\"\n    }],\n    stateMutability: \"view\",\n    type: \"function\"\n  }];\n  erc20Contract = new web3.eth.Contract(erc20Abi, // Dai contract on Rinkeby\n  '0x0fa0B2a9fb28752E37b36Ce5Ccc30C15B84980A6');\n  BurnContract = new web3.eth.Contract(requestBurnabi, '0x0fa0B2a9fb28752E37b36Ce5Ccc30C15B84980A6');\n  readContract = new web3.eth.Contract(readabi, '0x0fa0B2a9fb28752E37b36Ce5Ccc30C15B84980A6');\n  requestContract = new web3.eth.Contract(requestabi, '0x0fa0B2a9fb28752E37b36Ce5Ccc30C15B84980A6');\n  erc20ExampleContract = new web3.eth.Contract(erc20ExAbi, '0xB93c86916ca6c5526faF2F2Fb83c8990283c3435');\n  isInitialized = true;\n};\nexport const getOwnBalance = async () => {\n  if (!isInitialized) {\n    await init();\n  }\n\n  return erc20Contract.methods.balanceOf(selectedAccount).call().then(balance => {\n    return Web3.utils.fromWei(balance);\n  });\n};\nexport const requestMint = async () => {\n  if (!isInitialized) {\n    await init();\n  }\n\n  return requestContract.methods.requestMint(\"bbb\", 10).send({\n    from: selectedAccount\n  });\n};\nexport const requestMint2 = async (gameID, amount) => {\n  if (!isInitialized) {\n    await init();\n  }\n\n  return requestContract.methods.requestMint(gameID, amount).send({\n    from: selectedAccount\n  });\n};\nexport const requestBurn = async (gameID, amount) => {\n  if (!isInitialized) {\n    await init();\n  }\n\n  return BurnContract.methods.requestBurn(gameID, amount).send({\n    from: selectedAccount\n  });\n};\nexport const read = async () => {\n  if (!isInitialized) {\n    await init();\n  }\n\n  return readContract.methods.read().send({\n    from: selectedAccount\n  });\n};\nexport const tokenInfo = async tokenAddress => {\n  if (!isInitialized) {\n    await init();\n  }\n\n  const tokenName = await erc20ExampleContract.methods.name();\n  const tokenSymbol = await erc20ExampleContract.methods.symbol();\n  return {\n    tokenName,\n    tokenSymbol\n  };\n};","map":{"version":3,"names":["NFTContractBuild","Web3","RequestContractBuild","selectedAccount","erc20Contract","requestContract","BurnContract","readContract","erc20ExampleContract","isInitialized","init","provider","window","ethereum","request","method","then","accounts","console","log","catch","err","on","web3","networkId","eth","net","getId","erc20Abi","constant","inputs","name","type","outputs","payable","stateMutability","requestabi","requestBurnabi","readabi","erc20ExAbi","Contract","getOwnBalance","methods","balanceOf","call","balance","utils","fromWei","requestMint","send","from","requestMint2","gameID","amount","requestBurn","read","tokenInfo","tokenAddress","tokenName","tokenSymbol","symbol"],"sources":["/Users/bagdongho/Desktop/web3-tutorials/WEB3-TUTORIAL/src/Web3Client.js"],"sourcesContent":["import NFTContractBuild from 'contracts/NFT.json';\nimport Web3 from 'web3';\nimport RequestContractBuild from 'contracts/RequestManager.json';\n\n\nlet selectedAccount;\nlet erc20Contract;\nlet requestContract;\nlet BurnContract;\nlet readContract;\nlet erc20ExampleContract\nlet isInitialized = false;\n\n\nexport const init = async () => {\n\tlet provider = window.ethereum;\n\n\tif (typeof provider !== 'undefined') {\n\t\tprovider\n\t\t\t.request({ method: 'eth_requestAccounts' })\n\t\t\t.then((accounts) => {\n\t\t\t\tselectedAccount = accounts[0];\n\t\t\t\tconsole.log(`Selected account is ${selectedAccount}`);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t\treturn;\n\t\t\t});\n\n\t\twindow.ethereum.on('accountsChanged', function (accounts) {\n\t\t\tselectedAccount = accounts[0];\n\t\t\tconsole.log(`Selected account changed to ${selectedAccount}`);\n\t\t});\n\t}\n\n\tconst web3 = new Web3(provider);\n\n\tconst networkId = await web3.eth.net.getId();\n\n\tconst erc20Abi = [\n\t\t{\n\t\t\tconstant: true,\n\t\t\tinputs: [\n\t\t\t\t{\n\t\t\t\t\tname: '_owner',\n\t\t\t\t\ttype: 'address'\n\t\t\t\t}\n\t\t\t],\n\t\t\tname: 'balanceOf',\n\t\t\toutputs: [\n\t\t\t\t{\n\t\t\t\t\tname: 'balance',\n\t\t\t\t\ttype: 'uint256'\n\t\t\t\t}\n\t\t\t],\n\t\t\tpayable: false,\n\t\t\tstateMutability: 'view',\n\t\t\ttype: 'function'\n\t\t}\n\t];\n\n\tconst requestabi = [{\n\t\tinputs: [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"_gameID\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"_amount\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\tname: \"requestMint\",\n\t\toutputs: [],\n\t\tstateMutability: \"nonpayable\",\n\t\ttype : \"function\"\n\t}];\n\n\tconst requestBurnabi = [{\n\t\tinputs: [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"_gameID\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"_amount\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\tname: \"requestBurn\",\n\t\toutputs: [],\n\t\tstateMutability: \"nonpayable\",\n\t\ttype: \"function\"\n\t}];\n\n\tconst readabi = [\n\t\t{\n\t\t\tinputs: [],\n\t\t\tname: \"read\",\n\t\t\toutputs: [\n\t\t\t\t{\n\t\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\t\"name\": \"\",\n\t\t\t\t\t\"type\": \"uint256\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"internalType\": \"string[]\",\n\t\t\t\t\t\"name\": \"\",\n\t\t\t\t\t\"type\": \"string[]\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"internalType\": \"uint256[]\",\n\t\t\t\t\t\"name\": \"\",\n\t\t\t\t\t\"type\": \"uint256[]\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"internalType\": \"bool[]\",\n\t\t\t\t\t\"name\": \"\",\n\t\t\t\t\t\"type\": \"bool[]\"\n\t\t\t\t}\n\t\t\t],\n\t\t\tstateMutability: \"view\",\n\t\t\ttype: \"function\"\n\t\t}\n\t];\n\n\tconst erc20ExAbi = [\n\t\t{\n\t\t\tinputs: [],\n\t\t\tname: \"name\",\n\t\t\t\"outputs\": [\n\t\t\t\t{\n\t\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\t\"name\": \"\",\n\t\t\t\t\t\"type\": \"string\"\n\t\t\t\t}\n\t\t\t],\n\t\t\tstateMutability: \"view\",\n\t\t\ttype: \"function\"\n\t\t},\n\t\t{\n\t\t\tinputs: [],\n\t\t\tname: \"symbol\",\n\t\t\toutputs: [\n\t\t\t\t{\n\t\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\t\"name\": \"\",\n\t\t\t\t\t\"type\": \"string\"\n\t\t\t\t}\n\t\t\t],\n\t\t\tstateMutability: \"view\",\n\t\t\ttype: \"function\"\n\t\t}\n\t];\n\n\terc20Contract = new web3.eth.Contract(\n\t\terc20Abi,\n\t\t// Dai contract on Rinkeby\n\t\t'0x0fa0B2a9fb28752E37b36Ce5Ccc30C15B84980A6'\n\t);\n\t\n\tBurnContract = new web3.eth.Contract(\n\t\trequestBurnabi, '0x0fa0B2a9fb28752E37b36Ce5Ccc30C15B84980A6'\n\t);\n\n\treadContract = new web3.eth.Contract(\n\t\treadabi, '0x0fa0B2a9fb28752E37b36Ce5Ccc30C15B84980A6'\n\t);\n\trequestContract = new web3.eth.Contract(\n\t\trequestabi, '0x0fa0B2a9fb28752E37b36Ce5Ccc30C15B84980A6'\n\t);\n\n\terc20ExampleContract = new web3.eth.Contract(\n\t\terc20ExAbi,\n\t\t'0xB93c86916ca6c5526faF2F2Fb83c8990283c3435'\n\t);\n\t\n\n\tisInitialized = true;\n};\n\nexport const getOwnBalance = async () => {\n\tif (!isInitialized) {\n\t\tawait init();\n\t}\n\n\treturn erc20Contract.methods\n\t\t.balanceOf(selectedAccount)\n\t\t.call()\n\t\t.then((balance) => {\n\t\t\treturn Web3.utils.fromWei(balance);\n\t\t});\n};\n\nexport const requestMint = async () => {\n\tif (!isInitialized) {\n\t\tawait init();\n\t}\n\n\treturn requestContract.methods\n\t\t.requestMint(\"bbb\", 10)\n\t\t.send({from: selectedAccount});\n}\n\nexport const requestMint2 = async (gameID, amount) => {\n\tif (!isInitialized) {\n\t\tawait init();\n\t}\n\n\treturn requestContract.methods\n\t\t.requestMint(gameID, amount)\n\t\t.send({from: selectedAccount});\n}\n\nexport const requestBurn = async (gameID, amount) => {\n\tif (!isInitialized) {\n\t\tawait init();\n\t}\n\n\treturn BurnContract.methods\n\t\t.requestBurn(gameID, amount)\n\t\t.send({from: selectedAccount});\n}\n\nexport const read = async() => {\n\tif (!isInitialized) {\n\t\tawait init();\n\t}\n\n\treturn readContract.methods.read().send({from: selectedAccount});\n}\n\nexport const tokenInfo = async(tokenAddress) => {\n\tif (!isInitialized) {\n\t\tawait init();\n\t}\n\n\tconst tokenName = await erc20ExampleContract.methods.name();\n  const tokenSymbol = await erc20ExampleContract.methods.symbol();\n\n\treturn {tokenName, tokenSymbol};\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}