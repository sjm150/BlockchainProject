{"ast":null,"code":"import NFTContractBuild from 'contracts/NFT.json';\nimport Web3 from 'web3';\nimport RequestContractBuild from 'contracts/RequestManager.json';\nlet selectedAccount;\nlet nftContract;\nlet erc20Contract;\nlet requestContract;\nlet BurnContract;\nlet readContract;\nlet isInitialized = false;\nexport const init = async () => {\n  let provider = window.ethereum;\n\n  if (typeof provider !== 'undefined') {\n    provider.request({\n      method: 'eth_requestAccounts'\n    }).then(accounts => {\n      selectedAccount = accounts[0];\n      console.log(`Selected account is ${selectedAccount}`);\n    }).catch(err => {\n      console.log(err);\n      return;\n    });\n    window.ethereum.on('accountsChanged', function (accounts) {\n      selectedAccount = accounts[0];\n      console.log(`Selected account changed to ${selectedAccount}`);\n    });\n  }\n\n  const web3 = new Web3(provider);\n  const networkId = await web3.eth.net.getId();\n  const erc20Abi = [{\n    constant: true,\n    inputs: [{\n      name: '_owner',\n      type: 'address'\n    }],\n    name: 'balanceOf',\n    outputs: [{\n      name: 'balance',\n      type: 'uint256'\n    }],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  }];\n  const requestabi = [{\n    inputs: [{\n      \"internalType\": \"string\",\n      \"name\": \"_gameID\",\n      \"type\": \"string\"\n    }, {\n      \"internalType\": \"uint256\",\n      \"name\": \"_amount\",\n      \"type\": \"uint256\"\n    }],\n    name: \"requestMint\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\"\n  }];\n  const requestBurnabi = [{\n    inputs: [{\n      \"internalType\": \"string\",\n      \"name\": \"_gameID\",\n      \"type\": \"string\"\n    }, {\n      \"internalType\": \"uint256\",\n      \"name\": \"_amount\",\n      \"type\": \"uint256\"\n    }],\n    name: \"requestBurn\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\"\n  }];\n  const readabi = [{\n    inputs: [],\n    name: \"read\",\n    outputs: [{\n      \"internalType\": \"uint256\",\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }, {\n      \"internalType\": \"string[]\",\n      \"name\": \"\",\n      \"type\": \"string[]\"\n    }, {\n      \"internalType\": \"uint256[]\",\n      \"name\": \"\",\n      \"type\": \"uint256[]\"\n    }, {\n      \"internalType\": \"bool[]\",\n      \"name\": \"\",\n      \"type\": \"bool[]\"\n    }],\n    stateMutability: \"view\",\n    type: \"function\"\n  }];\n  erc20Contract = new web3.eth.Contract(erc20Abi, // Dai contract on Rinkeby\n  '0x5592ec0cfb4dbc12d3ab100b257153436a1f0fea');\n  BurnContract = new web3.eth.Contract(requestBurnabi, '0xa2dcf71C4a85EBA1d62eAc9EBfFC610291b80f37');\n  readContract = new web3.eth.Contract(readabi, '0xa2dcf71C4a85EBA1d62eAc9EBfFC610291b80f37');\n  requestContract = new web3.eth.Contract(requestabi, '0xa2dcf71C4a85EBA1d62eAc9EBfFC610291b80f37');\n  isInitialized = true;\n};\nexport const getOwnBalance = async () => {\n  if (!isInitialized) {\n    await init();\n  }\n\n  return erc20Contract.methods.balanceOf(selectedAccount).call().then(balance => {\n    return Web3.utils.fromWei(balance);\n  });\n};\nexport const requestMint = async () => {\n  if (!isInitialized) {\n    await init();\n  }\n\n  return requestContract.methods.requestMint(\"bbb\", 10).send({\n    from: selectedAccount\n  });\n};\nexport const requestMint2 = async (gameID, amount) => {\n  if (!isInitialized) {\n    await init();\n  }\n\n  return requestContract.methods.requestMint(gameID, amount).send({\n    from: selectedAccount\n  });\n};\nexport const requestBurn = async (gameID, amount) => {\n  if (!isInitialized) {\n    await init();\n  }\n\n  return BurnContract.methods.requestBurn(gameID, amount).send({\n    from: selectedAccount\n  });\n};","map":{"version":3,"names":["NFTContractBuild","Web3","RequestContractBuild","selectedAccount","nftContract","erc20Contract","requestContract","BurnContract","readContract","isInitialized","init","provider","window","ethereum","request","method","then","accounts","console","log","catch","err","on","web3","networkId","eth","net","getId","erc20Abi","constant","inputs","name","type","outputs","payable","stateMutability","requestabi","requestBurnabi","readabi","Contract","getOwnBalance","methods","balanceOf","call","balance","utils","fromWei","requestMint","send","from","requestMint2","gameID","amount","requestBurn"],"sources":["/Users/bagdongho/Desktop/web3-tutorials/WEB3-TUTORIAL/src/Web3Client.js"],"sourcesContent":["import NFTContractBuild from 'contracts/NFT.json';\nimport Web3 from 'web3';\nimport RequestContractBuild from 'contracts/RequestManager.json';\n\n\nlet selectedAccount;\nlet nftContract;\nlet erc20Contract;\nlet requestContract;\nlet BurnContract;\nlet readContract;\nlet isInitialized = false;\n\nexport const init = async () => {\n\tlet provider = window.ethereum;\n\n\tif (typeof provider !== 'undefined') {\n\t\tprovider\n\t\t\t.request({ method: 'eth_requestAccounts' })\n\t\t\t.then((accounts) => {\n\t\t\t\tselectedAccount = accounts[0];\n\t\t\t\tconsole.log(`Selected account is ${selectedAccount}`);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t\treturn;\n\t\t\t});\n\n\t\twindow.ethereum.on('accountsChanged', function (accounts) {\n\t\t\tselectedAccount = accounts[0];\n\t\t\tconsole.log(`Selected account changed to ${selectedAccount}`);\n\t\t});\n\t}\n\n\tconst web3 = new Web3(provider);\n\n\tconst networkId = await web3.eth.net.getId();\n\n\tconst erc20Abi = [\n\t\t{\n\t\t\tconstant: true,\n\t\t\tinputs: [\n\t\t\t\t{\n\t\t\t\t\tname: '_owner',\n\t\t\t\t\ttype: 'address'\n\t\t\t\t}\n\t\t\t],\n\t\t\tname: 'balanceOf',\n\t\t\toutputs: [\n\t\t\t\t{\n\t\t\t\t\tname: 'balance',\n\t\t\t\t\ttype: 'uint256'\n\t\t\t\t}\n\t\t\t],\n\t\t\tpayable: false,\n\t\t\tstateMutability: 'view',\n\t\t\ttype: 'function'\n\t\t}\n\t];\n\n\tconst requestabi = [{\n\t\tinputs: [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"_gameID\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"_amount\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\tname: \"requestMint\",\n\t\toutputs: [],\n\t\tstateMutability: \"nonpayable\",\n\t\ttype : \"function\"\n\t}];\n\n\tconst requestBurnabi = [{\n\t\tinputs: [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"_gameID\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"_amount\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\tname: \"requestBurn\",\n\t\toutputs: [],\n\t\tstateMutability: \"nonpayable\",\n\t\ttype: \"function\"\n\t}];\n\n\tconst readabi = [\n\t\t{\n\t\t\tinputs: [],\n\t\t\tname: \"read\",\n\t\t\toutputs: [\n\t\t\t\t{\n\t\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\t\"name\": \"\",\n\t\t\t\t\t\"type\": \"uint256\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"internalType\": \"string[]\",\n\t\t\t\t\t\"name\": \"\",\n\t\t\t\t\t\"type\": \"string[]\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"internalType\": \"uint256[]\",\n\t\t\t\t\t\"name\": \"\",\n\t\t\t\t\t\"type\": \"uint256[]\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"internalType\": \"bool[]\",\n\t\t\t\t\t\"name\": \"\",\n\t\t\t\t\t\"type\": \"bool[]\"\n\t\t\t\t}\n\t\t\t],\n\t\t\tstateMutability: \"view\",\n\t\t\ttype: \"function\"\n\t\t}\n\t];\n\n\terc20Contract = new web3.eth.Contract(\n\t\terc20Abi,\n\t\t// Dai contract on Rinkeby\n\t\t'0x5592ec0cfb4dbc12d3ab100b257153436a1f0fea'\n\t);\n\t\n\tBurnContract = new web3.eth.Contract(\n\t\trequestBurnabi, '0xa2dcf71C4a85EBA1d62eAc9EBfFC610291b80f37'\n\t);\n\n\treadContract = new web3.eth.Contract(\n\t\treadabi, '0xa2dcf71C4a85EBA1d62eAc9EBfFC610291b80f37'\n\t);\n\trequestContract = new web3.eth.Contract(\n\t\trequestabi, '0xa2dcf71C4a85EBA1d62eAc9EBfFC610291b80f37'\n\t);\n\n\tisInitialized = true;\n};\n\nexport const getOwnBalance = async () => {\n\tif (!isInitialized) {\n\t\tawait init();\n\t}\n\n\treturn erc20Contract.methods\n\t\t.balanceOf(selectedAccount)\n\t\t.call()\n\t\t.then((balance) => {\n\t\t\treturn Web3.utils.fromWei(balance);\n\t\t});\n};\n\n\nexport const requestMint = async () => {\n\tif (!isInitialized) {\n\t\tawait init();\n\t}\n\n\treturn requestContract.methods\n\t\t.requestMint(\"bbb\", 10)\n\t\t.send({from: selectedAccount});\n}\n\nexport const requestMint2 = async (gameID, amount) => {\n\tif (!isInitialized) {\n\t\tawait init();\n\t}\n\n\treturn requestContract.methods\n\t\t.requestMint(gameID, amount)\n\t\t.send({from: selectedAccount});\n}\n\nexport const requestBurn = async (gameID, amount) => {\n\tif (!isInitialized) {\n\t\tawait init();\n\t}\n\n\treturn BurnContract.methods\n\t\t.requestBurn(gameID, amount)\n\t\t.send({from: selectedAccount});\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}